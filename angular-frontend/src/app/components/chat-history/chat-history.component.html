<div class="chat-history-container">
  <div class="chat-history-list">
    <mat-list>
      @for (session of visibleSessions; track session.id) {
        <mat-list-item (click)="loadSession(session.id)">
          <div mat-line>{{ getTitle(session) }}</div>
          <div mat-line>
            <small>{{ session.startTime | date:'short' }}</small>
          </div>
          <button mat-icon-button (click)="deleteSession(session.id, $event)" class="delete-button">
            <mat-icon>delete</mat-icon>
          </button>
        </mat-list-item>
      }
    </mat-list>
  </div>
  <div class="chat-history-actions">
    @if (showAllButton) {
      <button mat-button (click)="toggleShowAll()">
        {{ showAll ? 'Show Less' : 'Show More' }}
      </button>
    }
  </div>
  @if ((sessions$ | async)?.length === 0) {
    <p>No chat history found.</p>
  }
</div>
